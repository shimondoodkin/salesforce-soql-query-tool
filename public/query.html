<!DOCTYPE html>
<html>
  <head>
    <title>leumi</title>
	<link rel="stylesheet" href="vakata-jstree-aa240c1/dist/themes/default/style.min.css" />
	<link rel="stylesheet" href="famfamfam_silk_icons_v013/icons.css" />

    <!--[if lt IE 9]>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.js"></script>
    <![endif]-->
<script src="vakata-jstree-aa240c1/dist/libs/jquery.js"></script>
<script src="vakata-jstree-aa240c1/dist/jstree.min.js"></script>
<script src="jsforce-master/build/jsforce.min.js">
//cdn availible: //cdnjs.cloudflare.com/ajax/libs/jsforce/1.3.1/jsforce.min.js
</script>
<script type="text/javascript">
$(function () {
/*
			$(window).resize(function () {
				var h = Math.max($(window).height() - 0, 420);
				$('#container, #data, #tree, #data .content').height(h).filter('.default').css('lineHeight', h + 'px');
			}).resize();
*/
			$('#tree')
				.jstree({
					'core' : {
						'data' : function (obj, cb) {
						
						var result=[{
									  //id          : "string" // will be autogenerated if omitted
									  text        : "test1" // node text
									  //icon        : "string" // string for custom
									  ,children    :  true //[]  // array of strings or objects or true or false for ajax
									  
									},
									'Root 2'
									];
							cb.call(this,result);
						},
						'check_callback' : true,
						'themes' : {
							'responsive' : false
						}
					}//,
					 ,plugins : [ "sort"]
					//'plugins' : ['state','dnd','contextmenu','wholerow']
				})/*
				
				.on('changed.jstree', function (e, data) {
					if(data && data.selected && data.selected.length) {
						$.get('?operation=get_content&id=' + data.selected.join(':'), function (d) {
							$('#data .default').html(d.content).show();
						});
					}
					else {
						$('#data .content').hide();
						$('#data .default').html('Select a file from the tree.').show();
					}
				});*/
		});
</script>
  
<script>
jsforce.browser.init({
  clientId: '3MVG9xOCXq4ID1uHdeGOJqq3lgaFOTYcyzWZpWFnHF_3YbxYOevGjDMTglqqsPCrwaVDHL.En4OFljUNv7Wcu',
  redirectUri: 'https://bnetgames.com/files/hashredirect.html?url=http%3A%2F%2Fdirect.doodkin.com%3A8080%2F',
  proxyUrl: 'http://direct.doodkin.com:8080/proxy/'});
/*
jsforce.browser.login('jordan@johns.blhack', 'leumihack14', function(err, userInfo) {
  if (err) { return console.error(err); }
  // Now you can get the access token and instance URL information.
  // Save them to establish connection next time.
  console.log(conn.accessToken);
  console.log(conn.instanceUrl);
  // logged in user property
  console.log("User ID: " + userInfo.id);
  console.log("Org ID: " + userInfo.organizationId);
  // ...
});
*/
jsforce.browser.on('error', function(error) {
  $('#status')[0].style.backgroundColor='#660000'
  $('#status')[0].innerHTML='Error';
});

jsforce.browser.on('connect', function(conn) {
  window.conn=conn
  $('#status')[0].style.backgroundColor='#006600'
  $('#status')[0].innerHTML='Connected';
  
  //listqueries();
	
/*
  conn.query('SELECT Id, Name FROM Account', function(err, res) {
    if (err) { return console.error(err); }
    console.log(res);
  });
  */
});
/*

// Get a map of all fields available to you on the MyObject__c table/object
// keyed by the API name of each field
Map<String,Schema.SObjectField> myObjectFields 
   = MyObject__c.SObjectType.getDescribe().fields.getMap();

// Get a Set of the field names
Set<String> myObjectFieldAPINames = myObjectFields.keyset();

// Print out the names to the debug log
 String allFields = 'ALL ACCESSIBLE FIELDS on MyObject__c:\n\n';
for (String s : myObjectFieldAPINames) {
    allFields += s + '\n';
}
System.debug(allFields);
To finish this off, and achieve SELECT * FROM MYTABLE functionality, you would need to construct a dynamic SOQL query using these fields:

List<String> fieldsList = new List<String>(myObjectFieldAPINames);
String query = 'SELECT ';
// Add in all but the last field, comma-separated
for (Integer i = 0; i < fieldsList.size()-1; i++) {
   query += fieldsList + ',';
}
// Add in the final field
query += fieldsList[fieldsList.size()-1];
// Complete the query
query += ' FROM MyCustomObject__c';
// Perform the query (perform the SELECT *)
List<SObject> results = Database.query(query);

conn.describeGlobal(function(err, res) {
  if (err) { return console.error(err); }
  console.log('Num of SObjects : ' + res.sobjects.length);
  // ...
});

conn.describe("Account", function(err, meta) {
  if (err) { return console.error(err); }
  console.log('Label : ' + meta.label);
  console.log('Num of Fields : ' + meta.fields.length);
  // ...
});

*/


function remove_attributes(res)
{
	try
	{
		if(typeof res=='object')
		{
		 var resc=res instanceof Array?[]:{};
		 Object.keys(res).forEach(function(a){
		  if(typeof res!='object') {resc[a]=res[a]; return} //shortcut
		  if(a!='attributes') resc[a]=remove_attributes(res[a])
		 }); 
		 return resc;
		}
		else
		return res;		
	}catch(e){console.log(e.stack)}
}

function runquery()
{
  conn.query($('#query')[0].value, function(err, res) {
	if (err) { $('#result')[0].value=err.stack; return}
    //if (err) { return console.error(err); }
    window.r=res;
	
	// remove attributes from rows
	
	var resc=remove_attributes(res);
	
	$('#result')[0].value=JSON.stringify(resc, null, 2);
  });
}
 
function listqueries(dontfiltertables,dontfilterfields)
{
	$('#result')[0].value='';
    if(!window.conn)return jsforce.browser.login();
    window.r={};
	$("#choose").empty();
	var option = document.createElement("option");option.value="";option.text="clear";	$('#choose')[0].options.add(option);
		  
	conn.describeGlobal(function(err, res) {
	  //if (err) { return console.error(err.); }
	  if (err) { $('#result')[0].value+=err.stack; return}
	  
	  if(dontfiltertables)
	  var r=res.sobjects;
	  else
	  var r=res.sobjects.filter(function(a){return a.custom||a.name=='Contact'})
	  
	  console.log('Custom SObjects Availible: ' + r.length);
	  //r.forEach(function(a){console.log(JSON.stringify(a, null, 2))})
	  var r2=r.map(function(a){return a.name});
	  //console.log(JSON.stringify(r2, null, 2))
      
	  r2.forEach(function(t){

		conn.describe(t,function(err, res) {
		  if (err) { $('#result')[0].value+=err.stack; return}
		  
		  window.r[t]=res;
		  //r.forEach(function(a){console.log(JSON.stringify(a, null, 2))})
		  

		  //console.log(JSON.stringify(res, null, 2));

		  
		  
		  if(dontfilterfields)
		  var r1=res.childRelationships;
		  else
		  var r1=res.childRelationships.filter(function(a){		  
		  
if(a.childSObject=='ContentVersion') return false;
if(a.childSObject=='FeedComment') return false;
if(a.childSObject=='FeedItem') return false;
if(a.childSObject=='ActivityHistory') return false;
if(a.childSObject=='Attachment') return false;
if(a.childSObject=='Event') return false;
if(a.childSObject=='EntitySubscription') return false;
if(a.childSObject=='Note') return false;
if(a.childSObject=='NoteAndAttachment') return false;
if(a.childSObject=='OpenActivity') return false;
if(a.childSObject=='ProcessInstance') return false;
if(a.childSObject=='ProcessInstanceHistory') return false;
if(a.childSObject=='Task') return false;

if(a.childSObject=='AttachedContentDocuments') return false;
if(a.childSObject=='CombinedAttachments') return false;
if(a.childSObject=='TopicAssignment') return false;
if(a.childSObject=='CombinedAttachment') return false;
if(a.childSObject=='AttachedContentDocument') return false;


 

if(a.childSObject=='AcceptedEventRelations') return false;
if(a.childSObject=='Histories') return false;
if(a.childSObject=='Feeds') return false;
if(a.childSObject=='null') return false;
if(a.childSObject===null) return false;
if(a.relationshipName=='null') return false;
if(a.relationshipName===null) return false;

if(a.relationshipName.match(/Statuses$/)) return false;
if(a.relationshipName.match(/Relations$/)) return false;
if(a.relationshipName.match(/Roles$/)) return false;
if(a.relationshipName.match(/CleanInfos$/)) return false;
if(a.childSObject.match(/__History$/)) return false;
if(a.childSObject.match(/History$/)) return false;

if(a.deprecatedAndHidden) return false;
return true;
});
		  
		  
		  if(dontfilterfields)
		  var r2=res.fields;
		  else
		  var r2=res.fields.filter(function(a){return a.custom||a.name=="Id"||a.name=="Name"});
		  
		  var q='';
		  $('#result')[0].value+=q='\n\nSELECT '+(r2.map(function(a){return a.name}).join(', '))+' FROM '+t+''
		  +(r1.length==0?'':'\nrelationships:\n'+(r1.map(function(a){return a.relationshipName+'\t=\t'+a.childSObject}).join('\n')))
		  ;
		  var option = document.createElement("option"); option.value=q; option.text=t;	  $('#choose')[0].options.add(option);
		  
		  //console.log(JSON.stringify(r2, null, 2))
		});
	  
	  })
	  
	  
	});
}
  </script>
 </head>
  <body>

  <h1>salesforce SOQL query</h1>
  
  <button onclick="javascript:jsforce.browser.login();">Login</button>  
  <label><input type="checkbox" id="alltables">alltables</label>
  <label><input type="checkbox" id="allfields">allfields</label>
  <button onclick="javascript:listqueries($('#alltables')[0].checked,$('#allfields')[0].checked);">list queries</button>
  
  <button onclick="javascript:runquery();">run query</button>
  <select id="choose" onchange="$('#query')[0].value=this.value">
   <option value="">click on &quot;list queries&quot;</option>
  </select>
  
  <br><br>
 
  <textarea id="query" style="width:75%" rows=16></textarea><br>
  <textarea id="result" style="width:75%" rows=32></textarea><br>
  <pre style="color:lightgray">
  there is r variable in console, example code to filter result:
  var r2=r.filter(function(a){return a.custom||a.name=="Id"||a.name=="Name"})
  r2.map(function(a){return {name:a.name,type:a.type}}) // choose few
  r2.map(function(a){return a.name}) // or choose one
  r2.forEach(function(a){console.log(JSON.stringify(a, null, 2))}) // print for each
  console.log(JSON.stringify(r2, null, 2)) // print as is
  //records you see is the result textarea are with attributes property removed from records
  </pre>
  
  </body>
</html>
