<!DOCTYPE html>
<html>
  <head>
    <title>leumi</title>
	<link rel="stylesheet" href="vakata-jstree-aa240c1/dist/themes/default/style.min.css" />
	<link rel="stylesheet" href="famfamfam_silk_icons_v013/icons.css" />

    <!--[if lt IE 9]>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.js"></script>
    <![endif]-->
<script src="vakata-jstree-aa240c1/dist/libs/jquery.js"></script>
<script src="vakata-jstree-aa240c1/dist/jstree.min.js"></script>
<script src="jsforce-master/build/jsforce.min.js">
//cdn availible: //cdnjs.cloudflare.com/ajax/libs/jsforce/1.3.1/jsforce.min.js
</script>
<script type="text/javascript">
$(function () {
/*
			$(window).resize(function () {
				var h = Math.max($(window).height() - 0, 420);
				$('#container, #data, #tree, #data .content').height(h).filter('.default').css('lineHeight', h + 'px');
			}).resize();
*/
			$('#tree')
				.jstree({
					'core' : {
						'data' : function (obj, cb) {
						
						var result=[{
									  //id          : "string" // will be autogenerated if omitted
									  text        : "test1" // node text
									  //icon        : "string" // string for custom
									  ,children    :  true //[]  // array of strings or objects or true or false for ajax
									  
									},
									'Root 2'
									];
							cb.call(this,result);
						},
						'check_callback' : true,
						'themes' : {
							'responsive' : false
						}
					}//,
					 ,plugins : [ "sort"]
					//'plugins' : ['state','dnd','contextmenu','wholerow']
				})/*
				
				.on('changed.jstree', function (e, data) {
					if(data && data.selected && data.selected.length) {
						$.get('?operation=get_content&id=' + data.selected.join(':'), function (d) {
							$('#data .default').html(d.content).show();
						});
					}
					else {
						$('#data .content').hide();
						$('#data .default').html('Select a file from the tree.').show();
					}
				});*/
		});
</script>
  
<script>
jsforce.browser.init({
  clientId: '3MVG9xOCXq4ID1uHdeGOJqq3lgaFOTYcyzWZpWFnHF_3YbxYOevGjDMTglqqsPCrwaVDHL.En4OFljUNv7Wcu',
  redirectUri: 'https://direct.doodkin.com:8080/',
  proxyUrl: 'https://direct.doodkin.com:8080/proxy/'});
/*
jsforce.browser.login('jule@hauck.blhack', 'leumihack14', function(err, userInfo) {
  if (err) { return console.error(err); }
  // Now you can get the access token and instance URL information.
  // Save them to establish connection next time.
  console.log(conn.accessToken);
  console.log(conn.instanceUrl);
  // logged in user property
  console.log("User ID: " + userInfo.id);
  console.log("Org ID: " + userInfo.organizationId);
  // ...
});
*/

jsforce.browser.on('connect', function(conn) {
  window.conn=conn
  
	conn.describeGlobal(function(err, res) {
	  if (err) { return console.error(err); }
	  var r=res.sobjects.filter(function(a){return a.custom})
	  console.log('Custom SObjects Availible: ' + r.length);
	  //r.forEach(function(a){console.log(JSON.stringify(a, null, 2))})
	  var r2=r.map(function(a){return a.name});
	  console.log(JSON.stringify(r2, null, 2))
      
	  r2.forEach(function(t){

		conn.describe(t,function(err, res) {
		  if (err) { return console.error(err); }
		  
		  
		  //r.forEach(function(a){console.log(JSON.stringify(a, null, 2))})
		  var r2=res.fields;//.filter(function(a){return a.custom||a.name=="Id"||a.name=="Name"});
		  console.log('\nSELECT '+r2.map(function(a){return a.name})+' FROM '+t+'');
		  
		  
		  //console.log(JSON.stringify(r2, null, 2))
		});
	  
	  })
	  
	  
	});
	
	
/*
  conn.query('SELECT Id, Name FROM Account', function(err, res) {
    if (err) { return console.error(err); }
    console.log(res);
  });
  */
});
/*
Shimon_Web_Test
Shimon_Web_Test__Account_Number__c	Text(30)	 	Avital Shoval, 9/27/2014 8:21 AM	Not Checked
Edit | Del	 	
Customer
Shimon_Web_Test__Customer__c	Lookup(Customer)	 	Avital Shoval, 9/27/2014 8:21 AM	Not Checked
Edit | Del	 	
Type of Account
Shimon_Web_Test__Type_of_Account__c 


Select * From Bank_Account__c

Select b.Id, b.Customer__r.Customer_Number__c, b.Customer__c,(Select Name, Product__c From Bank_Accounts_with_Products__r) From Bank_Account__c b where b.Customer__r.Customer_Number__c =: customersList[0].Customer_Number__c









// Get a map of all fields available to you on the MyObject__c table/object
// keyed by the API name of each field
Map<String,Schema.SObjectField> myObjectFields 
   = MyObject__c.SObjectType.getDescribe().fields.getMap();

// Get a Set of the field names
Set<String> myObjectFieldAPINames = myObjectFields.keyset();

// Print out the names to the debug log
 String allFields = 'ALL ACCESSIBLE FIELDS on MyObject__c:\n\n';
for (String s : myObjectFieldAPINames) {
    allFields += s + '\n';
}
System.debug(allFields);
To finish this off, and achieve SELECT * FROM MYTABLE functionality, you would need to construct a dynamic SOQL query using these fields:

List<String> fieldsList = new List<String>(myObjectFieldAPINames);
String query = 'SELECT ';
// Add in all but the last field, comma-separated
for (Integer i = 0; i < fieldsList.size()-1; i++) {
   query += fieldsList + ',';
}
// Add in the final field
query += fieldsList[fieldsList.size()-1];
// Complete the query
query += ' FROM MyCustomObject__c';
// Perform the query (perform the SELECT *)
List<SObject> results = Database.query(query);

conn.describeGlobal(function(err, res) {
  if (err) { return console.error(err); }
  console.log('Num of SObjects : ' + res.sobjects.length);
  // ...
});

conn.describe("Account", function(err, meta) {
  if (err) { return console.error(err); }
  console.log('Label : ' + meta.label);
  console.log('Num of Fields : ' + meta.fields.length);
  // ...
});

*/
  </script>
 </head>
  <body>

  <div id="tree" style="width:300px;border:1px solid black">
  </div>

  <button onclick="javascript:jsforce.browser.login();">Login</button>

  </body>
</html>
